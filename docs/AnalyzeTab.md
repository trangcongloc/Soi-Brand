# AnalysisTab Component - Section Mapping Documentation

This document maps all sections in `AnalysisTab.tsx` to their corresponding data structures in the Gemini AI prompt (`lib/prompts/marketing-report.ts`).

---

## Overview

The AnalysisTab component displays **report_part_2** data generated by Gemini AI. The prompt is structured to return comprehensive marketing analysis in JSON format.

**Main Data Structure:**
- `report_part_2`: Strategy, audience, SEO, and quantitative analysis
- `report_part_3`: Insights, recommendations, and action plans (displayed in InsightsTab)

---

## Section Mapping (AnalysisTab.tsx â†’ Prompt Data)

### 1. **Strategy Analysis**
**Location:** `AnalysisTab.tsx:147-441`
**Prompt Path:** `report_part_2.strategy_analysis`

#### Sub-sections:
- **Brand Identity** â†’ `strategy_analysis.brand_identity`
  - Visual Style â†’ `brand_identity.visual_style`
  - Tone of Voice â†’ `brand_identity.tone_of_voice`
  - Brand Positioning â†’ `brand_identity.brand_positioning`

- **Ad Strategy Overview** â†’ `report_part_2.ad_strategy`
  - Overview â†’ `ad_strategy.overview`
  - Ad Angles â†’ `ad_strategy.ad_angles[]`
  - Target Audience Clues â†’ `ad_strategy.target_audience_clues`

**Prompt Instructions (lines 147-151):**
```
"ad_strategy": {
  "overview": "Tá»•ng quan vá» chiáº¿n lÆ°á»£c quáº£ng cÃ¡o (náº¿u cÃ³)",
  "ad_angles": ["GÃ³c Ä‘á»™ quáº£ng cÃ¡o 1", "GÃ³c Ä‘á»™ 2"],
  "target_audience_clues": "PhÃ¢n tÃ­ch Ä‘á»‘i tÆ°á»£ng má»¥c tiÃªu dá»±a trÃªn ná»™i dung"
}
```

**Analysis:**
- âœ… **Keep:** Brand identity is fundamental to marketing analysis
- âš ï¸ **Consider:** Ad strategy may be minimal for non-commercial channels
- ğŸ’¡ **Upgrade:** Add visual analysis from thumbnails (currently text-only)

---

### 2. **Content Pillars**
**Location:** `AnalysisTab.tsx:442-468`
**Prompt Path:** `report_part_2.strategy_analysis.content_pillars[]`

**Prompt Instructions (lines 164-170):**
```
"content_pillars": [
  {
    "pillar": "TÃªn trá»¥ cá»™t ná»™i dung 1",
    "purpose": "Má»¥c Ä‘Ã­ch",
    "description": "MÃ´ táº£ chi tiáº¿t"
  }
]
```

**Analysis:**
- âœ… **Keep:** Essential for understanding channel strategy
- ğŸ’¡ **Upgrade:** Add visual representation (chart showing pillar distribution)
- ğŸ’¡ **Upgrade:** Link pillars to actual video examples

---

### 3. **Content Focus & Topics**
**Location:** `AnalysisTab.tsx:469-520` (approximate)
**Prompt Path:** `report_part_2.strategy_analysis.content_focus`

**Prompt Instructions (lines 171-174):**
```
"content_focus": {
  "overview": "MÃ´ táº£ tá»•ng quan vá» cÃ¡c ná»™i dung chÃ­nh...",
  "topics": ["Chá»§ Ä‘á» 1", "Chá»§ Ä‘á» 2", "Chá»§ Ä‘á» 3"]
}
```

**Analysis:**
- âœ… **Keep:** Critical for content strategy
- ğŸ’¡ **Upgrade:** Add topic frequency analysis (which topics appear most)

---

### 4. **Content Niche Analysis**
**Location:** `AnalysisTab.tsx:471-738` (approximate)
**Prompt Path:** `report_part_2.strategy_analysis.content_niche_analysis`

#### Sub-sections:
- Primary Niche â†’ `content_niche_analysis.primary_niche`
- Sub-niches â†’ `content_niche_analysis.sub_niches[]`
- Content Categories â†’ `content_niche_analysis.content_categories[]`
  - Category name, percentage, description
- Niche Positioning â†’ `content_niche_analysis.niche_positioning`
- Competitor Landscape â†’ `content_niche_analysis.competitor_landscape`
- Content Uniqueness â†’ `content_niche_analysis.content_uniqueness`

**Prompt Instructions (lines 175-198):**
```
"content_niche_analysis": {
  "primary_niche": "Niche chÃ­nh cá»§a kÃªnh",
  "sub_niches": ["Niche phá»¥ 1", "Niche phá»¥ 2"],
  "content_categories": [
    {
      "category": "TÃªn thá»ƒ loáº¡i ná»™i dung",
      "percentage": 40,
      "description": "MÃ´ táº£ chi tiáº¿t"
    }
  ],
  ...
}
```

**Analysis:**
- âœ… **Keep:** Comprehensive niche analysis is valuable
- ğŸ’¡ **Upgrade:** Add percentage visualization (pie chart)
- ğŸ’¡ **Upgrade:** Add competitor channel links/examples
- âš ï¸ **Consider:** May be too detailed for simple channels

---

### 5. **Content Structure Analysis**
**Location:** `AnalysisTab.tsx:741-910` (approximate)
**Prompt Path:** `report_part_2.strategy_analysis.content_structure_analysis`

#### Sub-sections:
- Hook Tactics â†’ `content_structure_analysis.hook_tactics`
- Storytelling â†’ `content_structure_analysis.storytelling`
- CTA Strategy â†’ `content_structure_analysis.cta_strategy`
- Emotional Triggers â†’ `content_structure_analysis.emotional_triggers`
- Top Content Analysis â†’ `strategy_analysis.top_content_analysis`
  - Best Performing â†’ `top_content_analysis.best_performing`
  - Worst Performing â†’ `top_content_analysis.worst_performing`

**Prompt Instructions (lines 210-215):**
```
"content_structure_analysis": {
  "hook_tactics": "Chiáº¿n thuáº­t thu hÃºt trong 3-5 giÃ¢y Ä‘áº§u",
  "storytelling": "Cáº¥u trÃºc ká»ƒ chuyá»‡n",
  "cta_strategy": "Chiáº¿n lÆ°á»£c Call-to-Action",
  "emotional_triggers": "CÃ¡c yáº¿u tá»‘ cáº£m xÃºc"
}
```

**Analysis:**
- âœ… **Keep:** Valuable for content creators
- âš ï¸ **Limitation:** AI cannot watch videos, analysis is based on titles/descriptions only
- ğŸ’¡ **Upgrade:** Clarify this is based on metadata analysis, not actual video viewing
- ğŸ’¡ **Upgrade:** Add links to best/worst performing videos

---

### 6. **Funnel Analysis**
**Location:** `AnalysisTab.tsx:911-1056`
**Prompt Path:** `report_part_2.funnel_analysis`

#### Sub-sections:
- TOFU (Top of Funnel) â†’ `funnel_analysis.tofu`
- MOFU (Middle of Funnel) â†’ `funnel_analysis.mofu`
- BOFU (Bottom of Funnel) â†’ `funnel_analysis.bofu`

**Prompt Instructions (lines 153-157):**
```
"funnel_analysis": {
  "tofu": "PhÃ¢n tÃ­ch TOFU - cÃ¡ch kÃªnh thu hÃºt ngÆ°á»i xem má»›i",
  "mofu": "PhÃ¢n tÃ­ch MOFU - cÃ¡ch xÃ¢y dá»±ng lÃ²ng tin",
  "bofu": "PhÃ¢n tÃ­ch BOFU - CTA vÃ  chuyá»ƒn Ä‘á»•i"
}
```

**Analysis:**
- âœ… **Keep:** Marketing funnel is essential for strategy
- ğŸ’¡ **Upgrade:** Add funnel visualization diagram
- ğŸ’¡ **Upgrade:** Add metrics for each funnel stage (conversion rates)

---

### 7. **Audience Analysis**
**Location:** `AnalysisTab.tsx:1057-1441`
**Prompt Path:** `report_part_2.audience_analysis`

#### Sub-sections:
- **Demographics** â†’ `audience_analysis.demographics`
  - Age Distribution â†’ `demographics.age_distribution[]` (range, percentage)
  - Gender Split â†’ `demographics.gender_split` (male, female, other)
  - Top Countries â†’ `demographics.top_countries[]` (country, percentage)
  - Primary Languages â†’ `demographics.primary_languages[]`
  - ~~Income Level~~ â†’ ~~`demographics.income_level`~~ *(REMOVED)*
  - ~~Education Level~~ â†’ ~~`demographics.education_level`~~ *(REMOVED)*

- **Behavior** â†’ `audience_analysis.behavior`
  - Estimated Watch Time â†’ `behavior.estimated_watch_time`
  - Returning vs New Ratio â†’ `behavior.returning_vs_new_ratio`
  - Subscriber Growth Trend â†’ `behavior.subscriber_growth_trend`
  - Peak Viewing Days â†’ `behavior.peak_viewing_days[]`
  - Peak Viewing Hours â†’ `behavior.peak_viewing_hours[]`
  - Engagement Patterns â†’ `behavior.engagement_patterns`
  - Device Preferences â†’ `behavior.device_preferences`

- **Psychographics** â†’ `audience_analysis.psychographics`
  - Values â†’ `psychographics.values[]`
  - Lifestyle â†’ `psychographics.lifestyle`
  - Purchase Behavior â†’ `psychographics.purchase_behavior`

**Prompt Instructions (lines 217-251):**
```
"audience_analysis": {
  "demographics": { ... },
  "behavior": { ... },
  "psychographics": { ... }
}
```

**Analysis:**
- âœ… **Keep:** Comprehensive audience understanding is critical
- âš ï¸ **Limitation:** All demographic data is AI-estimated (YouTube API doesn't provide this)
- ğŸ’¡ **Upgrade:** Add disclaimer that demographics are AI estimates
- âœ… **Good:** Peak viewing days/hours use actual posting time data
- ğŸ’¡ **Upgrade:** Add age/gender distribution charts
- ğŸ’¡ **Upgrade:** Add country distribution map

---

### 8. **Audience Personas**
**Location:** `AnalysisTab.tsx:1442-1678`
**Prompt Path:** `report_part_2.audience_personas[]`

#### Fields per Persona:
- Name (segment name, not individual)
- Avatar Description
- Demographics
- Age Range
- Gender
- Location
- Occupation
- Interests
- Pain Points
- Goals
- Content Preferences
- Preferred Video Length
- Viewing Frequency
- Social Platforms
- Buying Triggers

**Prompt Instructions (lines 253-288):**
```
"audience_personas": [
  {
    "name": "TÃªn NHÃ“M khÃ¡n giáº£ (VD: 'Young Enthusiasts', 'Parents')",
    "avatar_description": "MÃ´ táº£ tá»•ng quan vá» nhÃ³m khÃ¡n giáº£",
    ...
    "buying_triggers": ["Yáº¿u tá»‘ 1", "Yáº¿u tá»‘ 2"]
  }
]
```

**Special Requirements:**
- Minimum 2 personas (audience SEGMENTS, not individuals)
- Must include full information for each persona

**Analysis:**
- âœ… **Keep:** Personas are valuable for targeting strategy
- âš ï¸ **Limitation:** Entirely AI-generated estimates
- ğŸ’¡ **Upgrade:** Add visual persona cards with icons
- ğŸ’¡ **Upgrade:** Add percentage distribution (what % of audience is each persona)
- âš ï¸ **Consider:** May be overwhelming for small channels

---

### 9. **Content Calendar**
**Location:** Likely in AnalysisTab (need to verify exact line)
**Prompt Path:** `report_part_2.content_calendar`

#### Sub-sections:
- Best Posting Days â†’ `content_calendar.best_posting_days[]`
- Best Posting Times â†’ `content_calendar.best_posting_times[]`
- Recommended Frequency â†’ `content_calendar.recommended_frequency`
- Content Mix â†’ `content_calendar.content_mix[]`
  - Content Type
  - Specific Topics
  - Percentage
  - Example Videos

**Prompt Instructions (lines 289-313):**
```
"content_calendar": {
  "best_posting_days": ["Thá»© 2", "Thá»© 4", ...],
  "best_posting_times": ["8:00", "14:00", ...],
  "recommended_frequency": "3-4 video/tuáº§n",
  "content_mix": [...]
}
```

**Special Requirements:**
- Days must be sorted Monday-Sunday (Vietnamese: Thá»© 2 - Chá»§ nháº­t)
- Times must be sorted 0:00-23:00
- Content types must be SPECIFIC (e.g., "Rainbow Cake", NOT "Baking tutorials")

**Analysis:**
- âœ… **Keep:** Actionable insights for content strategy
- âœ… **Good:** Uses actual posting time data from videos
- ğŸ’¡ **Upgrade:** Add calendar visualization
- ğŸ’¡ **Upgrade:** Add content mix pie chart
- ğŸ’¡ **Upgrade:** Link example videos directly

---

### 10. **SEO Analysis**
**Location:** `AnalysisTab.tsx:1679-2108`
**Prompt Path:** `report_part_2.seo_analysis`

#### Sub-sections:
- **Keyword Strategy** â†’ `seo_analysis.keyword_strategy`
  - Top Keywords â†’ `keyword_strategy.top_keywords[]`
  - Keyword Density â†’ `keyword_strategy.keyword_density`
  - Missing Keywords â†’ `keyword_strategy.missing_keywords[]`

- **Tag Analysis** â†’ `seo_analysis.tag_analysis`
  - Tag Coverage â†’ `tag_analysis.tag_coverage`
  - All Channel Tags â†’ `tag_analysis.all_channel_tags[]` *(ALL actual tags)*
  - Recommended Tags â†’ `tag_analysis.recommended_tags[]` *(New suggestions)*
  - Tag Consistency â†’ `tag_analysis.tag_consistency`
  - Most Used Tags â†’ `tag_analysis.most_used_tags[]`
    - Tag name
    - Frequency (actual count)
    - Performance Impact
  - **Tag Categories** â†’ `tag_analysis.tag_categories[]` *(IMPORTANT)*
    - Category name (professional SEO categories)
    - Purpose (why this category matters for SEO)
    - Tags (from all_channel_tags only)
    - Effectiveness (SEO effectiveness rating)
  - Competitor Tags â†’ `tag_analysis.competitor_tags[]`
  - Long-tail Opportunities â†’ `tag_analysis.long_tail_opportunities[]`
  - Tag Optimization Score â†’ `tag_analysis.tag_optimization_score`

- **Optimization Opportunities** â†’ `seo_analysis.optimization_opportunities[]`
  - Area (e.g., "TiÃªu Ä‘á» video", "MÃ´ táº£ video")
  - Issue
  - Recommendation
  - Priority (high/medium/low)

**Prompt Instructions (lines 322-388):**
```
"seo_analysis": {
  "keyword_strategy": { ... },
  "tag_analysis": {
    "all_channel_tags": ["ALL tags from video data"],
    "tag_categories": [
      {
        "category": "Core Content Keywords / Brand Identity / ...",
        "purpose": "Why this matters for SEO",
        "tags": ["Only from all_channel_tags"],
        "effectiveness": "High/Medium/Low with specific metrics"
      }
    ],
    ...
  },
  "optimization_opportunities": [...]
}
```

**Special Requirements:**
- `all_channel_tags`: MUST list ALL actual tags from video data
- `tag_categories`: Category names must be professional SEO terms:
  - "Core Content Keywords"
  - "Brand & Channel Identity"
  - "Content Format Tags"
  - "Audience Target Keywords"
  - "Trending & Viral Tags"
  - "SEO Long-tail Keywords"
  - "Niche-Specific Tags"
  - "Geographic/Language Tags"
- Each category MUST have a PURPOSE explaining SEO importance
- Only categorize tags from `all_channel_tags` (no new tags)

**Analysis:**
- âœ… **Keep:** SEO is critical for YouTube growth
- âœ… **Good:** Uses actual tag data from videos
- ğŸ’¡ **Upgrade:** Add tag cloud visualization
- ğŸ’¡ **Upgrade:** Add keyword density chart
- ğŸ’¡ **Upgrade:** Add tag category effectiveness comparison chart
- ğŸ’¡ **Upgrade:** Make tag categories expandable/collapsible (currently may be overwhelming)
- âš ï¸ **Consider:** Tag categories section is very detailed - might need simplification

---

### 11. **Tag Categories Deep Dive**
**Location:** `AnalysisTab.tsx:2109-2212` (approximate)
**Prompt Path:** `report_part_2.seo_analysis.tag_analysis.tag_categories[]`

This appears to be a dedicated section for tag category visualization.

**Analysis:**
- âœ… **Keep:** Unique SEO insight
- ğŸ’¡ **Upgrade:** Add visual category grouping
- ğŸ’¡ **Upgrade:** Add effectiveness score visualization
- âš ï¸ **Consider:** May be redundant with SEO Analysis section

---

### 12. **Growth Opportunities**
**Location:** `AnalysisTab.tsx:2213-end`
**Prompt Path:** `report_part_2.growth_opportunities[]`

#### Fields per Opportunity:
- Opportunity Name
- Description
- Priority (high/medium/low)
- Expected Impact

**Prompt Instructions (lines 314-321):**
```
"growth_opportunities": [
  {
    "opportunity": "TÃªn cÆ¡ há»™i tÄƒng trÆ°á»Ÿng",
    "description": "MÃ´ táº£ chi tiáº¿t",
    "priority": "high",
    "expected_impact": "+20% subscriber trong 3 thÃ¡ng"
  }
]
```

**Special Requirements:**
- Minimum 3 opportunities with different priorities

**Analysis:**
- âœ… **Keep:** Actionable growth recommendations
- ğŸ’¡ **Upgrade:** Add priority badges (high/medium/low with colors)
- ğŸ’¡ **Upgrade:** Add impact visualization (metrics)
- ğŸ’¡ **Upgrade:** Add implementation difficulty rating

---

### 13. **Quantitative Synthesis**
**Location:** Likely displayed as summary cards throughout the tab
**Prompt Path:** `report_part_2.quantitative_synthesis`

#### Sub-sections:
- **Summary Stats** â†’ `quantitative_synthesis.summary_stats`
  - Total Posts, Views, Likes, Shares, Saves, Photos, Videos

- **Channel Health** â†’ `quantitative_synthesis.channel_health`
  - Follower Count
  - Posting Frequency
  - Engagement Rate (ER)

- **Channel Metrics** â†’ `quantitative_synthesis.channel_metrics`
  - Video Count, Follower Count, Following Count, Heart Count

- **Content Performance** â†’ `quantitative_synthesis.content_performance`
  - Average View
  - Viral Score
  - Value Score
  - Ad Ratio

**Prompt Instructions (lines 389-416):**
```
"quantitative_synthesis": {
  "summary_stats": { ... },
  "channel_health": {
    "er_rate": "Calculated as: (Total Likes + Total Comments) / Total Views * 100%"
  },
  "content_performance": { ... }
}
```

**Analysis:**
- âœ… **Keep:** Essential metrics overview
- ğŸ’¡ **Upgrade:** Add trend indicators (up/down arrows)
- ğŸ’¡ **Upgrade:** Add comparison to industry averages
- ğŸ’¡ **Upgrade:** Add metrics visualization (gauges, progress bars)

---

## Sections NOT in AnalysisTab (in InsightsTab instead)

These are part of `report_part_3` and displayed in a separate tab:

### 14. **Strengths**
**Prompt Path:** `report_part_3.strengths[]`

### 15. **Executive Summary**
**Prompt Path:** `report_part_3.executive_summary`

### 16. **Actionable Insights**
**Prompt Path:** `report_part_3.actionable_insights`
- Learn From â†’ `actionable_insights.learn_from`
- Avoid â†’ `actionable_insights.avoid`
- Video Ideas â†’ `actionable_insights.video_ideas[]`

### 17. **Weaknesses & Opportunities**
**Prompt Path:** `report_part_3.weaknesses_opportunities[]`

### 18. **Action Plan**
**Prompt Path:** `report_part_3.action_plan`
- Phase 30 Days â†’ `action_plan.phase_30_days[]`
- Phase 60 Days â†’ `action_plan.phase_60_days[]`
- Phase 90 Days â†’ `action_plan.phase_90_days[]`

---

## Data Flow Summary

```
YouTube API (lib/youtube.ts)
  â†“
Channel Info + Videos Data
  â†“
Gemini AI (lib/gemini.ts + lib/prompts/marketing-report.ts)
  â†“
MarketingReport JSON (report_part_2 + report_part_3)
  â†“
AnalysisTab.tsx (displays report_part_2)
InsightsTab.tsx (displays report_part_3)
```

---

## Recommendations

### Sections to KEEP (Essential)
1. âœ… Strategy Analysis (Brand Identity)
2. âœ… Content Pillars
3. âœ… Content Niche Analysis (maybe simplify)
4. âœ… Funnel Analysis
5. âœ… Audience Analysis (with disclaimer)
6. âœ… Audience Personas (2 minimum)
7. âœ… Content Calendar
8. âœ… SEO Analysis
9. âœ… Growth Opportunities
10. âœ… Quantitative Synthesis

### Sections to SIMPLIFY/IMPROVE
1. âš ï¸ **Content Structure Analysis** - Clarify AI limitations (no video viewing)
2. âš ï¸ **Tag Categories** - Consider collapsible/expandable UI (very detailed)
3. âš ï¸ **Audience Personas** - Add percentage distribution, may be overwhelming for small channels

### Sections to REMOVE/MERGE
1. âŒ **Income Level** (ALREADY REMOVED) - Not provided by API, pure speculation
2. âŒ **Education Level** (ALREADY REMOVED) - Not provided by API, pure speculation
3. âš ï¸ **Ad Strategy** - Consider removing for channels without ads (or make conditional)

### Major UPGRADES to Consider
1. ğŸ’¡ Add data visualizations:
   - Age/Gender distribution charts
   - Content category pie charts
   - Tag cloud
   - Content calendar visualization
   - Funnel diagram
   - Country distribution map

2. ğŸ’¡ Add AI estimation disclaimers:
   - Demographics are AI estimates (not from YouTube API)
   - Content analysis is based on metadata only (AI doesn't watch videos)

3. ğŸ’¡ Add interactivity:
   - Expandable/collapsible sections
   - Click to see example videos
   - Filter/sort tag categories
   - Compare metrics to benchmarks

4. ğŸ’¡ Add links:
   - Link to best/worst performing videos
   - Link to competitor channels (if mentioned)
   - Link example videos in content mix

5. ğŸ’¡ Performance metrics:
   - Add trend indicators
   - Add comparison to channel averages
   - Add benchmark comparisons

---

## Technical Notes

### Current Limitations
1. **No Video Viewing**: AI cannot watch videos - analysis is based on:
   - Video titles
   - Descriptions (first 200 chars)
   - Tags
   - Statistics (views, likes, comments)
   - Published dates

2. **No Real Demographics**: YouTube API doesn't provide demographic data:
   - Age, gender, location are AI estimates
   - Based on content language, topic, style

3. **Limited Competitor Data**: No competitor channel data fetched:
   - Competitor analysis is AI speculation

### Data Sources
- âœ… **Real Data**: Video count, views, likes, comments, publish times, tags
- âš ï¸ **Calculated**: Engagement rate, posting frequency, peak times
- ğŸ¤– **AI Estimated**: Demographics, personas, content structure, competitors

---

## File References

- **Component**: `/components/report/AnalysisTab.tsx`
- **Prompt Template**: `/lib/prompts/marketing-report.ts`
- **Gemini Integration**: `/lib/gemini.ts`
- **Type Definitions**: `/lib/types.ts`
- **Language Files**: `/lib/lang/vi.ts`, `/lib/lang/en.ts`

---

*Last Updated: 2026-01-19*
*Created for Soi'Brand YouTube Marketing Analysis Tool*
